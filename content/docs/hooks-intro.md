---
id: hooks-intro
title: Введение в хуки
permalink: docs/hooks-intro.html
next: hooks-overview.html
---

*Хуки* это новое дополнение в React 16.8. Они позволяют вам использовать состояние и другие возможности React без написания классов.

```js{4,5}
import React, { useState } from 'react';

function Example() {
  // Объявление переменной состояния, которую мы назовём «count»
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

Функция `useState` это первый «Хук», который мы изучим и это всего лишь небольшой пример. Не переживайте, если вы пока не понимаете зачем они нужны.

**Вы можете начать изучать Хуки [на следующей странице](/docs/hooks-overview.html).** Здесь же мы расскажем, зачем мы добавили Хуки в React, и как они помогут вам писать приложения лучше.

>Примечание
>
>React 16.8.0 это первый релиз поддерживающий Хуки. При обновлении версии, не забудьте обновить все зависимости, включая ReactDOM. React Native будет поддерживать Хуки в следующем стабильном релизе.

## Видео введение {#video-introduction}

На конференции React Conf 2018, Софья Альперт (Sophie Alpert) и Дэн Абрамов (Dan Abramov) представили Хуки, а затем Райн Фроленц (Ryan Florence) показал, как с их помощью переписать ваше приложение. Видео конференции можно посмотреть здесь:

<br>

<iframe width="650" height="366" src="//www.youtube.com/embed/dpw9EHDh2bM" frameborder="0" allowfullscreen></iframe>

## Не нарушая совместимость {#no-breaking-changes}

Перед тем, как мы продолжим, запомните, что Хуки:

* **Полностью на ваше усмотрение.** Вы можете попробовать Хуки в нескольких компонентах, не изменяя код в уже существующих. Нет необходимости учить и использовать Хуки прямо сейчас, если не хотите.
* **100% обратно совместимы.** Хуки не содержат изменений, которые могут поломать ваш существующий код.
* **Доступны прямо сейчас.** Хуки доступны с выходом версии v16.8.0.

**Мы не планируем удалять классы из React.** Вы можете прочитать больше о стратегии постепенного внедрения новых Хуков в [разделе ниже](#gradual-adoption-strategy).

**Хуки не меняют ваши знания о концепциях в React.** Вместо этого, Хуки предоставляют более прямой доступ к API уже знакомых вам понятий: пропсы, состояние, контексты, рефы, и жизненный цикл. Позже мы покажем вам, что Хуки предоставляют мощный способ для объединения этих концепций.

**Если вы хотите начать изучать Хуки, то [переходите на следующую страницу!](/docs/hooks-overview.html)** Вы можете продолжить чтение этой страницы, чтобы узнать больше о том, почему бы добавили Хуки и как мы можем использовать их без переписывания нашего приложения.

## Мотивация {#motivation}

Хуки решают огромное количество, казалось бы несвязанных между собой, проблем в React, с которыми мы сталкивались в течение пяти лет написания и поддержки десятки тысяч компонентов. Если вы изучаете React, используете его ежедневно или используете другую библиотеку с похожим компонентным подходом, вы должны узнать некоторые из этих проблем.

### Трудно переиспользовать логику состояний между компонентами {#its-hard-to-reuse-stateful-logic-between-components}

React не позволяет переиспользовать поведение компонентов (например, передача хранилища). Если вы работали с React какое-то время, то вы должны быть знакомы с такими паттернами как [рендер-пропсы](/docs/render-props.html) и [компоненты высшего порядка](/docs/higher-order-components.html) которые пытаются решить эту проблему. Но эти паттерны заставляют вас изменять структуру компонентов, что делает код громоздким и трудным в поддержке. Если вы посмотрите на типичное React приложение в React DevTools, то увидите «ад обёрток» из компонентов, окружённых провайдерами, консьюмерами, компонентами высшего порядка, рендер пропсами и другими абстракциями. Хоть мы и можем [отфильтровать их в DevTools](https://github.com/facebook/react-devtools/pull/503), но всё это указывает на более глубокую проблему: необходимость в React более удобного способа для обмена логикой состояния.

С помощью хуков вы можете извлечь логику состояния из компонента, чтобы протестировать её независимо и повторно использовать. **Хуки позволяют вам переиспользовать логику состояния без изменения структуры компонента.** Это позволяет обмениваться Хуками между компонентами или делиться с сообществом.

Мы обсудим это подробнее в разделе [создание собственных Хуков](/docs/hooks-custom.html).

### Сложные компоненты становятся трудными для понимания {#complex-components-become-hard-to-understand}

Нам часто приходилось поддерживать компоненты, которые изначально были простыми, но превратились в неуправляемый беспорядок, состоящий из логики состояния и побочных эффектов. Каждый метод жизненного цикла часто содержит смесь несвязанной логики. Например, компоненты могут загружать данные в `componentDidMount` и `componentDidUpdate`. Однако тот же метод `componentDidMount` может содержать несвязанную логику, которая добавляет обработчики события с отменой подписки в `componentWillUnmount`. Взаимосвязанный код, который изменяется вместе, разделяется, но совершенно несвязанный код в конечном итоге объединяется в один метод. Из-за этого слишком легко добавить баги и несоответствия в приложение.

В некоторых случаях, невозможно разбить компоненты на более мелкие, потому что логика с отслеживанием состояния повсюду. Также их сложно тестировать. Это одна из причин, по которой люди предпочитают использовать в React отдельную библиотеку для управления состоянием. Однако, это добавляет множество абстракций, заставляет прыгать между разными файлами и делает переиспользуемые компоненты более сложными.

Чтобы решить эту проблему, **Хуки позволяют вам разделять один компонент на маленькие функции, в зависимости от того, какие части связаны (например, подписка или загрузка данных)**, вместо разделения компонентов на основе методов жизненного цикла. Вы так же можете контролировать локальное состояние с помощью редьюсера, чтобы поведение было более предсказуемым.

Мы обсудим это в разделе [использование эффект хуков](/docs/hooks-effect.html#tip-use-multiple-effects-to-separate-concerns).

### Классы путают как людей, так и машины {#classes-confuse-both-people-and-machines}

В дополнение к тому, что усложняется организация кода и его переиспользование, мы обнаружили, что классы могут быть большим барьером для изучения React. Вы должны понимать, как работает `this` в JavaScript, поведение которого отличается от большинства языков. Вы должны помнить про привязку контекста для обработчиков событий. Без использования нестабильных [синтаксических предложений](https://babeljs.io/docs/en/babel-plugin-transform-class-properties/), код становится неоднозначным. Люди могут прекрасно понимать пропсы, стейт и поток данных сверху вниз, но они всё ещё борются с классами. Различия между функциональными и классовыми компонентами в React и тем, когда их использовать, приводит к разногласиям даже между опытными React-разработчиками.

Кроме того, React существует уже около пяти лет и мы хотим убедиться, что он останется актуальным в течении следующих пяти лет. Как показывают [Svelte](https://svelte.technology/), [Angular](https://angular.io/), [Glimmer](https://glimmerjs.com/) и другие технологии, использующие [компиляцию компонентов перед исполнением](https://ru.wikipedia.org/wiki/AOT-%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D1%8F%D1%86%D0%B8%D1%8F) имеют огромный потенциал в будущем. Особенно, если это не ограничивается шаблонами. Недавно мы экспериментировали со [свёртыванием компонентов](https://github.com/facebook/react/issues/7323) с использованием [Prepack](https://prepack.io/) и мы увидели первые многообещающие результаты.

Однако мы заметили, что классовые компоненты могут добавлять непредвиденные шаблоны, которые заставляют оптимизацию возвращаться к более медленным путям. Классы всё ещё являются проблемой для современных инструментов. Например, классы плохо минифицируются, а горячая перезагрузка (hot reloading) ненадёжна и ломает их. Мы хотим предоставить API, который повысит вероятность того, что код можно будет оптимизировать.

Для решения этих проблем, **Хуки позволяют вам использовать больше возможностей React без написания классов.** Концептуально, React-компоненты всегда были ближе к функциям. Хуки обеспечивают доступ к функционалу, но не жертвуют практическим духом React. Хуки предоставляют доступ к запасным выходам и не требуют от вас изучения сложных функциональных или реактивных подходов.

>Примеры
>
>[Обзор хуков](/docs/hooks-overview.html) — хорошее начало для изучения Хуков.

## Стратегия постепенного внедрения {#gradual-adoption-strategy}

>**TLDR: Мы не планируем удалять классы из React.**

Мы знаем, что React-разработчики сфокусированы на поставке продукта и у них нет времени, чтобы изучать новый API каждого релиза. Хуки это что-то новое и возможно, лучше подождать больше примеров и уроков, прежде чем начинать их изучение.

Мы так же понимаем, что препятствие для добавления новых примитивов в React очень высоко. Для любознательных читателей мы подготовили [подробный RFC](https://github.com/reactjs/rfcs/pull/68), который погружает в детали и предоставляет дополнительные решения и обзоры техник.

**Важно понимать, что Хуки работают бок о бок с существущим кодом, поэтому вы можете постепенно внедрять их.** Мы делимся этим API, чтобы получить раннюю обратную связь от тех, в сообществе, кто заинтересован в формировании будущего React и мы будем разбирать Хуки в открытую.

Наконец, нет никакой необходимости переходить на Хуки. Мы рекомендуем избегать любых «больших переписываний», особенно для существующих, сложных классовых компонентов. Это требует немного изменить мировоззрение, чтобы начать «мыслить Хуками». По нашему опыту, лучше всего сначала попрактиковаться использовать Хуки в новых и некритичных компонентах и убедиться, что все в вашей команде чувствуют себя комфортно с ними. После того, как вы попробуйте, не стесняйтесь [отправить нам свой отзыв](https://github.com/facebook/react/issues/new), позитивный или негативный.

Мы намерены охватить все возможные варианты использования классов в Хуках, но **мы всё ещё будем поддерживать классовые компоненты в ближайшем будущем.** В Facebook десятки тысяч компонентов, написанных в виде классов, и у нас нет абсолютно никаких планов на переписывание их. Вместо этого мы начинаем использовать Хуки в новом коде бок о бок с классами.

## Часто задаваемые вопросы {#frequently-asked-questions}

Мы подготовили для вас [FAQ страницу](/docs/hooks-faq.html) с ответами на самые частые вопросы о Хуках.

## Следующие шаги {#next-steps}

К концу этой страницы вы должны иметь приблизительное представление о том, какие проблемы решают Хуки, но многие детали, возможно, остались непонятны. Не беспокойтесь! **Давайте теперь перейдём на [следующую страницу](/docs/hooks-overview.html), где мы изучим Хуки на примерах.**
